name: afrobarometer_langs
title: Afrobarometer Languages Mapped to ISO Standards and WALS
version: 0.0.1
description: >-
    Mappings from languages used in the Afrobarometer surveys
    to some common language standards and databases, the
    ISO 639-3 langauge codes and the WALS database.
sources:
  - name: "Ethnologue Code Tables (2017-02-21)"
    path: 'https://www.ethnologue.com/codes/download-code-tables'
  - name: "Afrobarometer Merged Round 6 data (36 countries) (2016)"
    path: 'http://afrobarometer.org/data/merged-round-6-data-36-countries-2016'
  - name: "Afrobarometer Merged Round 5 data (34 countries) (2011-2013) (last update: July 2015)"
    path: 'http://afrobarometer.org/data/merged-round-5-data-34-countries-2011-2013-last-update-july-2015'
  - name: "Afrobarometer Merged Round 4 Data (20 countries) (2008)"
    path: 'http://www.afrobarometer.org/data/merged-round-4-data-20-countries-2008'
  - name: "Afrobarometer Merged Round 3 Data (18 countries) (2005)"
    path: 'http://www.afrobarometer.org/data/merged-round-3-data-18-countries-2005'
  - name: "Afrobarometer Merged Round 2 Data (16 countries) (2004)"
    path: 'http://www.afrobarometer.org/data/merged-round-2-data-16-countries-2004'
  - name: "Afrobarometer Merged Round 2 Codebook (12 countries) (1999-2001)"
    path: 'http://www.afrobarometer.org/data/merged-round-1-data-12-countries-1999-2001'
  - name: "Afrobarometer ISO 639-3 Complete Code Tables Set (2017-02-17)"
    path: 'http://www-01.sil.org/iso639-3/download.asp'
  - name: "The World Atlas of Language Structures Online"
    path: 'http://wals.info/download'
contributors:
  - name: Jeffrey B. Arnold
    email: "jeffrey.arnold@gmail.com"
    role: author

resources:

  - path: afrobarometer_langs.csv
    name: afrobarometer_langs
    name: Afrobarometer Language Summary
    description: >-
        For all rounds, variables which included language answers,
        the integer values and labels of the languages, and the
        countries in which those languages appeared.
    <<: &csv
        format: csv
        mediatype: text/csv
        encoding: utf-8
    schema:
      fields:
      - &round
        name: round
        type: string
        title: Afrobarometer round
        constraints:
          required: true
          enum: ["r1", "r2", "r3", "r4", "r5", "r6"]
      - <<: &question
          name: question
          type: string
          title: Afrobarometer survey question/variable
        constraints:
          required: true
          pattern: "(language|[qQ][0-9]+)"
      - <<: &lang_id
          type: integer
          title: Afrobarometer language value
          description: >-
            The integer value of the language in the Afrobarometer dataset, e.g.
            `1, 2, ....`
          constraints:
            required: true
            minimum: -1
            maximum: 9999
        name: value
      - <<: &lang_name
          type: string
          title: Afrobarometer language name
          description: >-
            The labels of the language variable in the Afrobarometer dataset,
            for example, `"English", "French", ...`.
          constraints:
            required: true
        name: name
      - name: countries
        types: string
        title: Countries
        description: >-
          Space separated ISO-3166 alpha-2 codes of the countries
          in which this value appeared in the Afrobarometer survey
          results.
        constraints:
          required: false
          enum: "[A-Z]{2}( [A-Z]{2})*"
      primaryKey:
      - round
      - question
      - lang_id

  - name: afrobarometer_langs_other
    path: afrobarometer_langs_other.csv
    title: "Afrobarometer 'Other' Languages"
    description: >-
      Languages mentioned in the text responses after answering "other" to
      a language question.
    <<: *csv
    schema:
      fields:
        - *round
        - <<: *question
          constraints:
            required: true
        - &country
          name: country
          label: Afrobarometer country
          type: integer
          description: >-
            Value of the country in the country variable of the Afrobarometer
            dataset.
          constraints:
            required: true
            minimum: 1
            maximum: 36
        - <<: &lang_other
              label: Language name
              type: string
              description: >-
                Language name. This is the value of the "other" language variable.
              constraints:
                required: true
          name: value
        - &iso_alpha_2
          name: iso_alpha_2
          label: Country
          type: string
          description: ISO 3166 Alpha-2 country code
          constraints:
            required: true
            pattern: "[A-Z][A-Z]"
      primaryKey:
      - round
      - question
      - country
      - value

  - path: iso_to_wals.csv
    name: iso_to_wals
    description: >-
      Mappings from all ISO 639-3 languages to a WALS language.
      These use the ISO 639-3 codes provided in the WALS dataset and the
      Ethnologue language tree. ISO languages are matched to the closest
      WALS language using distance on the Ethnologue tree.
      This mapping is many to many.
    <<: *csv
    schema:
      fields:
      - name: iso_code
        type: string
        label: ISO 639-3 Code From
        description: >-
          The ISO code of the language being mapped.
        constraints:
          required: true
          pattern: "[a-z]{3}"
      - name: wals_code
        type: string
        label: WALS code
        description: >-
          The WALS code associated with it.
        constraints:
          required: true
          pattern: "[a-z]{2,3}"
      - name: iso_code_to
        type: string
        label: ISO 639-3 Code (WALS)
        description: >-
          The ISO 639-3 code of the WALS language that was mapped to.
        constraints:
          required: true
          pattern: "[a-z]{3}"
      - &distance
        name: distance
        type: integer
        label: Distance
        description: >-
          The distance between the original ISO and the ISO code of the WALS
          language to which it was mapped. The distance is the graph distance
          between the two ISO languages in the Ethnologue language tree.
          A distance of 0 means the ISO language was directly mapped to a WALS language.
        constraints:
          required: true
          minimum: 0
      primaryKey:
      - iso_code
      - wals_code


  - path: afrobarometer_to_iso_639_3.csv
    name: afrobarometer_to_iso_639_3
    title: Mappings of Afrobarometer Languages to ISO 639-3 Codes
    description: >-
      Mappings between Afrobarometer "Other" Languages and the
      the codes of the ISO 639-3 standard.

      These mappings are many-to-many. An Afrobarometer language can map to more
      than one ISO 639-3 language, and more than one Afrobarometer language can
      map to the same ISO 639-3 language.
    <<: *csv
    schema:
      fields:
      - *round
      - <<: *question
        constraints:
          required: true
      - *country
      - <<: *lang_id
        name: lang_id
      - <<: *lang_name
        name: lang_name
      - &iso_639_3
        name: iso_639_3
        type: string
        title: ISO 639-3
        description: >-
          The ISO 639-3 language code. For example, `"eng"`.
          Not all languages are mapped, so there can be missing values.
        constraints:
          required: false
          pattern: "[a-z]{3}"
      - &iso_ref_name
        name: iso_ref_name
        type: string
        title: ISO Reference Name
        description: >-
          The official reference name of the ISO 639-3 language.
        constraints:
          required: false
      - &iso_scope
        name: iso_scope
        type: string
        title: ISO Language Type
        description: >-
          This is `"I"` if it is an individual language, and
          `"M"` if it is a macrolanguages (which includes multiple individual
          languages). See the ISO 639-3 documentation for more on the distinctions
          between these.
        constraints:
          required: false
          enum: ["I", "M", "S"]
      primaryKey:
      - round
      - question
      - country
      - lang_name

  - path: afrobarometer_other_to_iso_639_3.csv
    name: afrobarometer_other_to_iso_639_3
    title: Afrobarometer "Other" Languages to ISO 639-3 Codes
    description: >-
      Mappings between Afrobarometer "Other" Languages and the
      the codes of the ISO 639-3 standard.
    <<: *csv
    schema:
      fields:
      - *round
      - <<: *question
        constraints:
          required: true
      - *country
      - <<: *lang_other
        name: value
      - *iso_639_3
      - *iso_ref_name
      - *iso_scope
      - *iso_alpha_2
      primaryKey:
      - round
      - question
      - lang_id
      - iso_639_3

  - path: afrobarometer_to_wals.csv
    name: afrobarometer_to_wals
    title: Afrobarometer Language to WALS mappings
    description: >-
      The WALS languages associated with Afrobarometer languages.
    <<: *csv
    schema:
      fields:
      - *round
      - *question
      - <<: *lang_id
        name: lang_id
      - <<: *lang_name
        name: lang_name
      - &wals_code
        name: wals_code
        type: string
        title: WALS code
        description: >-
          The three-letter language identifier used by WALS.
        constraints:
          required: false
          pattern: "[a-z]{2,3}"
      - &wals_name
        name: wals_name
        type: string
        title: WALS Name
        description: >-
          The language name used by WALS
        constraints:
          required: false
      - &auto
        name: auto
        type: boolean
        title: Automatched
        description: >-
          If true, then language was matched to the WALS language using the
          ISO 639-9 mappings and the ISO-to-WALS mappings in `iso_to_wals`.
          If false, then the WALS codes were manually entered.
      - *distance
      primaryKey:
      - round
      - question
      - lang_id
      - wals_code

  - path: afrobarometer_other_to_wals.csv
    name: afrobarometer_other_to_wals
    title: Afrobarometer "Other" Languages to WALS
    description: >-
      The WALS languages associated with the Afrobarometer "Other" languages.
    <<: *csv
    schema:
      fields:
      - *round
      - *question
      - *country
      - <<: *lang_other
        name: value
      - *iso_alpha_2
      - *wals_code
      - *wals_name
      - *auto
      - *distance
      primaryKey:
      - round
      - question
      - country
      - lang_other
